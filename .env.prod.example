# ============================================================
# ПРОДАКШЕН КОНФИГУРАЦИЯ - ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ ВСЕ ПАРОЛИ!
# ============================================================

# ========== БАЗА ДАННЫХ POSTGRESQL ==========
# Сгенерируйте сложный пароль:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"

DATABASE_URL=postgresql+asyncpg://bookuser:ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_БД@postgres:5432/book_discounts
POSTGRES_USER=bookuser
POSTGRES_PASSWORD=ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_БД

# ========== REDIS ==========
# Сгенерируйте сложный пароль:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"

REDIS_URL=redis://:ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_REDIS@redis:6379/0
REDIS_PASSWORD=ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_REDIS

# ========== GOOGLE SHEETS ==========
# ID таблицы Google Sheets для записи скидок
# Получите из URL таблицы: https://docs.google.com/spreadsheets/d/ВАШ_ID/edit
GOOGLE_SHEET_ID=ВАШ_ID_ТАБЛИЦЫ

# Google Sheets Credentials через переменные окружения
# Извлеките эти данные из вашего credentials.json файла
# Подробная инструкция: GOOGLE_CREDENTIALS_SETUP.md
GOOGLE_CREDENTIALS_TYPE=service_account
GOOGLE_CREDENTIALS_PROJECT_ID=ВАШ_PROJECT_ID
GOOGLE_CREDENTIALS_PRIVATE_KEY_ID=ВАШ_PRIVATE_KEY_ID
GOOGLE_CREDENTIALS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
GOOGLE_CREDENTIALS_CLIENT_EMAIL=ВАШ_SERVICE_ACCOUNT_EMAIL@project-id.iam.gserviceaccount.com
GOOGLE_CREDENTIALS_CLIENT_ID=ВАШ_CLIENT_ID
GOOGLE_CREDENTIALS_AUTH_URI=https://accounts.google.com/o/oauth2/auth
GOOGLE_CREDENTIALS_TOKEN_URI=https://oauth2.googleapis.com/token
GOOGLE_CREDENTIALS_AUTH_PROVIDER_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
GOOGLE_CREDENTIALS_CLIENT_CERT_URL=https://www.googleapis.com/robot/v1/metadata/x509/ВАШ_SERVICE_ACCOUNT_EMAIL%40project-id.iam.gserviceaccount.com

# ========== TELEGRAM BOT ==========
# Получите токен через @BotFather в Telegram
TELEGRAM_BOT_TOKEN=ВАШ_ТОКЕН_БОТА

# ========== TELEGRAM MINI APP ==========
# URL вашего домена + /telegram
# ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ НА ВАШ ДОМЕН!
MINI_APP_URL=https://ВАШ_ДОМЕН.ru/telegram

# ========== БЕЗОПАСНОСТЬ ==========
# Сгенерируйте сложный секретный ключ:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"

SECRET_KEY=ВАШ_СЛОЖНЫЙ_СЕКРЕТНЫЙ_КЛЮЧ
ALGORITHM=HS256

# ========== АДМИН-ПАНЕЛЬ ==========
# Логин и пароль для доступа к /admin
# ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ!

ADMIN_USERNAME=admin
ADMIN_PASSWORD=ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_АДМИНА

# ========== CORS (КРИТИЧНО ДЛЯ TELEGRAM MINI APP) ==========
# Разрешенные источники для API
# ОБЯЗАТЕЛЬНО ВКЛЮЧИТЕ ВАШ ДОМЕН И TELEGRAM!

ALLOWED_ORIGINS=https://ВАШ_ДОМЕН.ru,https://www.ВАШ_ДОМЕН.ru,https://t.me,https://web.telegram.org

# ========== TRUSTED HOSTS ==========
# Разрешенные хосты
# ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ НА ВАШ ДОМЕН!

ALLOWED_HOSTS=ВАШ_ДОМЕН.ru,www.ВАШ_ДОМЕН.ru

# ========== НАСТРОЙКИ ПРИЛОЖЕНИЯ ==========
APP_NAME=Books Tracker
DEBUG=False  # В продакшене ВСЕГДА False!
LOG_LEVEL=INFO

# ========== ПАРСЕР ==========
PARSER_DELAY_MIN=1
PARSER_DELAY_MAX=3
CACHE_TTL=300

# ========== CELERY ==========
CELERY_BROKER_URL=redis://:ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_REDIS@redis:6379/0
CELERY_RESULT_BACKEND=redis://:ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_REDIS@redis:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=['json']
CELERY_TIMEZONE=Europe/Moscow

# ============================================================
# ИНСТРУКЦИЯ:
#
# 1. Скопируйте этот файл в .env:
#    cp .env.prod.example .env
#
# 2. Замените все значения на свои:
#    - ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_БД → сгенерированный пароль
#    - ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_REDIS → сгенерированный пароль
#    - ВАШ_СЛОЖНЫЙ_СЕКРЕТНЫЙ_КЛЮЧ → сгенерированный ключ
#    - ВАШ_СЛОЖНЫЙ_ПАРОЛЬ_АДМИНА → сгенерированный пароль
#    - ВАШ_ТОКЕН_БОТА → токен от @BotFather
#    - ВАШ_ДОМЕН.ru → ваш реальный домен
#    - ВАШ_ID_ТАБЛИЦЫ → ID вашей Google таблицы
#
# 3. Сгенерируйте пароли:
#    python3 -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 4. Запустите приложение:
#    docker-compose -f docker-compose.prod.yml up -d
#
# ============================================================
