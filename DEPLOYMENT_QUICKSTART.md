# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ö—Ä–∞—Ç–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üì¶ –ß—Ç–æ –∫—É–ø–∏—Ç—å (–ø—Ä–∏–º–µ—Ä–Ω—ã–µ —Ü–µ–Ω—ã)

| –ß—Ç–æ | –ì–¥–µ | –¶–µ–Ω–∞ |
|-----|-----|------|
| **–°–µ—Ä–≤–µ—Ä (VPS)** | Timeweb / Beget | ~300 ‚ÇΩ/–º–µ—Å |
| **–î–æ–º–µ–Ω** | Reg.ru / Nic.ru | ~200 ‚ÇΩ/–≥–æ–¥ |
| **–ò—Ç–æ–≥–æ** | | ~500 ‚ÇΩ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ |

---

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω (30 –º–∏–Ω—É—Ç)

### 1Ô∏è‚É£ –ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω (5 –º–∏–Ω—É—Ç)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Reg.ru](https://www.reg.ru/)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `bookhunter.ru`)
4. –í –ø–∞–Ω–µ–ª–∏ DNS –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å:
   - –¢–∏–ø: `A`
   - –ò–º—è: `@`
   - –ó–Ω–∞—á–µ–Ω–∏–µ: `(–ø–æ–∫–∞ –ø—É—Å—Ç–æ–π, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞)`

### 2Ô∏è‚É£ –ö—É–ø–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (5 –º–∏–Ω—É—Ç)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Timeweb Cloud](https://timeweb.cloud/)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   - –û–°: **Ubuntu 22.04 LTS**
   - –¢–∞—Ä–∏—Ñ: **2 CPU, 4 GB RAM, 40 GB SSD**
   - –ü–∞—Ä–æ–ª—å: **—Å–ª–æ–∂–Ω—ã–π**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ IP –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123.45.67.89`)

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS (1 –º–∏–Ω—É—Ç–∞)

–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ Reg.ru ‚Üí DNS ‚Üí –ò–∑–º–µ–Ω–∏—Ç–µ –∑–∞–ø–∏—Å—å:

```
–¢–∏–ø: A
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: 123.45.67.89 (IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
```

### 4Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É (2 –º–∏–Ω—É—Ç—ã)

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
ssh root@123.45.67.89
```

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

### 5Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker (5 –º–∏–Ω—É—Ç)

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

apt install nginx certbot python3-certbot-nginx git -y
```

### 6Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (3 –º–∏–Ω—É—Ç—ã)

```bash
mkdir -p /var/www/bookhunter
cd /var/www/bookhunter

# –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub:
git clone https://github.com/–≤–∞—à-—é–∑–µ—Ä–Ω–µ–π–º/–ø—Ä–æ–µ–∫—Ç.git .

# –ò–ª–∏ –∑–∞–≥—Ä—É–∑—å—Ç–µ —á–µ—Ä–µ–∑ SFTP/FTP
```

### 7Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env (5 –º–∏–Ω—É—Ç)

```bash
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql+asyncpg://bookuser:–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π–ü–∞—Ä–æ–ª—å–ë–î@postgres:5432/book_discounts
POSTGRES_USER=bookuser
POSTGRES_PASSWORD=–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π–ü–∞—Ä–æ–ª—å–ë–î

# Redis
REDIS_PASSWORD=–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π–ü–∞—Ä–æ–ª—åRedis

# Telegram Bot
TELEGRAM_BOT_TOKEN=–í–∞—à–¢–æ–∫–µ–Ω–û—ÇBotFather

# Mini App URL (–í–ê–ñ–ù–û!)
MINI_APP_URL=https://bookhunter.ru/telegram

# CORS (–í–ê–ñ–ù–û!)
ALLOWED_ORIGINS=https://bookhunter.ru,https://t.me,https://web.telegram.org
ALLOWED_HOSTS=bookhunter.ru,www.bookhunter.ru

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
SECRET_KEY=–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π–°–µ–∫—Ä–µ—Ç–Ω—ã–π–ö–ª—é—á
ADMIN_USERNAME=admin
ADMIN_PASSWORD=–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π–ü–∞—Ä–æ–ª—å–ê–¥–º–∏–Ω–∞
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π:**

```bash
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

### 8Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx (3 –º–∏–Ω—É—Ç—ã)

```bash
nano /etc/nginx/sites-available/bookhunter
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```nginx
server {
    listen 80;
    server_name bookhunter.ru www.bookhunter.ru;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name bookhunter.ru www.bookhunter.ru;

    ssl_certificate /etc/letsencrypt/live/bookhunter.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/bookhunter.ru/privkey.pem;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /telegram {
        alias /var/www/bookhunter/telegram/app;
        try_files $uri $uri/ /index.html;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ:

```bash
ln -s /etc/nginx/sites-available/bookhunter /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx
```

### 9Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (2 –º–∏–Ω—É—Ç—ã)

```bash
certbot --nginx -d bookhunter.ru -d www.bookhunter.ru
```

–û—Ç–≤–µ—Ç—å—Ç–µ:
- Email: `–≤–∞—à@email.com`
- –°–æ–≥–ª–∞—Å–∏–µ: `Y`
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `2`

### üîü –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (2 –º–∏–Ω—É—Ç—ã)

```bash
docker-compose up -d
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
docker-compose ps
```

### 1Ô∏è‚É£1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram Bot (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. `/newbot` ‚Üí `bookhunter` ‚Üí `bookhunter_bot`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω
4. `/mybots` ‚Üí –í–∞—à –±–æ—Ç ‚Üí **Bot Settings** ‚Üí **Menu Button**
5. –¢–µ–∫—Å—Ç: `üìö –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ`
6. URL: `https://bookhunter.ru/telegram`

### 1Ô∏è‚É£2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ (1 –º–∏–Ω—É—Ç–∞)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- ‚úÖ `https://bookhunter.ru`
- ‚úÖ `https://bookhunter.ru/telegram`

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram:
- ‚úÖ –í–∞—à –±–æ—Ç ‚Üí `/start` ‚Üí "üìö –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –î–æ–º–µ–Ω –∫—É–ø–ª–µ–Ω
- [ ] –°–µ—Ä–≤–µ—Ä –∫—É–ø–ª–µ–Ω
- [ ] DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL –ø–æ–ª—É—á–µ–Ω
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
- [ ] Telegram Bot –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤–µ–±-—Å–∞–π—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω Mini App

---

## üÜò –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs app
```

### SSL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
certbot --nginx -d bookhunter.ru -d www.bookhunter.ru --force-renewal
```

### Telegram Bot –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env
nano .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs telegram_bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
docker-compose restart telegram_bot
```

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:

```env
MINI_APP_URL=https://bookhunter.ru/telegram  # –ü—Ä–∞–≤–∏–ª—å–Ω–æ?
ALLOWED_ORIGINS=https://bookhunter.ru,https://t.me  # –í–∫–ª—é—á–µ–Ω t.me?
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª: `DEPLOYMENT_GUIDE.md`
3. –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ö–æ—Å—Ç–∏–Ω–≥–∞

---

**–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º!** üöÄ
