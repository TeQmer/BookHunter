# üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É BookHunter –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–í–∞—à–∏ –¥–æ–º–µ–Ω—ã:**
- –û—Å–Ω–æ–≤–Ω–æ–π: `mybook-hunter.ru`
- –î–ª—è Telegram: `mybook-hunter.store`

**–í—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** ~60 –º–∏–Ω—É—Ç

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–í—ã–±–æ—Ä –∏ –ø–æ–∫—É–ø–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#1-–≤—ã–±–æ—Ä-–∏-–ø–æ–∫—É–ø–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –¥–ª—è –¥–æ–º–µ–Ω–æ–≤](#2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-dns-–¥–ª—è-–¥–æ–º–µ–Ω–æ–≤)
3. [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É](#3-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∫-—Å–µ—Ä–≤–µ—Ä—É)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û](#4-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ-–ø–æ)
5. [–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä](#5-–∑–∞–≥—Ä—É–∑–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞-–Ω–∞-—Å–µ—Ä–≤–µ—Ä)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)](#6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è-env)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx](#7-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx)
8. [–ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞](#8-–ø–æ–ª—É—á–µ–Ω–∏–µ-ssl-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
9. [–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#9-–∑–∞–ø—É—Å–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
10. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot](#10-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-telegram-bot)
11. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã](#11-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç—ã)
12. [–¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥](#12-—Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥)

---

## 1. –í–´–ë–û–† –ò –ü–û–ö–£–ü–ö–ê –°–ï–†–í–ï–†–ê

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ö–æ—Å—Ç–∏–Ω–≥:

**Beget (–ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π):**
- –°–∞–π—Ç: https://beget.com/ru
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ç–∞—Ä–∏—Ñ: **Cloud-2**
  - 2 CPU —è–¥—Ä–∞
  - 4 GB RAM
  - 40 GB SSD
  - –¶–µ–Ω–∞: ~350 ‚ÇΩ/–º–µ—Å

**–ò–ª–∏ Timeweb Cloud:**
- –°–∞–π—Ç: https://timeweb.cloud/
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ç–∞—Ä–∏—Ñ: **Cloud-2**
  - 2 CPU —è–¥—Ä–∞
  - 4 GB RAM
  - 40 GB SSD
  - –¶–µ–Ω–∞: ~300 ‚ÇΩ/–º–µ—Å

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Beget):

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç:** https://beget.com/ru

2. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É:** "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" (–≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–∞–≤—ã–π —É–≥–æ–ª)

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:**
   - Email: –≤–∞—à email
   - –ü–∞—Ä–æ–ª—å: —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (–∑–∞–ø–æ–º–Ω–∏—Ç–µ!)
   - –ù–∞–∂–º–∏—Ç–µ: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"

4. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –ø–æ—á—Ç—É
   - –ù–∞–π–¥–∏—Ç–µ –ø–∏—Å—å–º–æ –æ—Ç Beget
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

5. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –Ω–∞–∂–º–∏—Ç–µ: "–í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å"

6. **–ù–∞–∂–º–∏—Ç–µ:** "–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã" (–≤ –º–µ–Ω—é —Å–ª–µ–≤–∞)

7. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É:** "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"

8. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   - **–ù–∞–∑–≤–∞–Ω–∏–µ:** `bookhunter` (–ª—é–±–æ–µ –∏–º—è)
   - **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:** –≤—ã–±–µ—Ä–∏—Ç–µ:
     - üñ•Ô∏è **Ubuntu 22.04 LTS** (–ù–ï –≤—ã–±–∏—Ä–∞–π—Ç–µ CentOS –∏–ª–∏ –¥—Ä—É–≥–∏–µ!)
   - **–¢–∞—Ä–∏—Ñ:** –≤—ã–±–µ—Ä–∏—Ç–µ "Cloud-2" (2 CPU, 4 GB RAM, 40 GB)
   - **–ü–∞—Ä–æ–ª—å root:**
     - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"
     - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ!
   - –ù–∞–∂–º–∏—Ç–µ: "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"

9. **–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞:**
   - –û–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 2-5 –º–∏–Ω—É—Ç
   - –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–ê–∫—Ç–∏–≤–µ–Ω"

10. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ IP –∞–¥—Ä–µ—Å:**
    - –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ "IP –∞–¥—Ä–µ—Å"
    - –ü—Ä–∏–º–µ—Ä: `123.45.67.89`
    - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ (–±—É–¥–µ—Ç –Ω—É–∂–µ–Ω –ø–æ–∑–∂–µ)

**‚úÖ –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 2. –ù–ê–°–¢–†–û–ô–ö–ê DNS –î–õ–Ø –î–û–ú–ï–ù–û–í

–í–∞—à–∏ –¥–æ–º–µ–Ω—ã —É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—É–ø–ª–µ–Ω—ã. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∏—Ö –∫ IP —Å–µ—Ä–≤–µ—Ä–∞.

### –ï—Å–ª–∏ –¥–æ–º–µ–Ω—ã –Ω–∞ Reg.ru:

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ:** https://www.reg.ru/

2. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç**

3. **–ù–∞–∂–º–∏—Ç–µ:** "–ú–æ–∏ –¥–æ–º–µ–Ω—ã" (–≤–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é)

4. **–ù–∞–π–¥–∏—Ç–µ –¥–æ–º–µ–Ω `mybook-hunter.ru`:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–æ–º–µ–Ω
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–æ–π"

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ –¥–ª—è `mybook-hunter.ru`:**

   **–£–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏** (–∫—Ä–æ–º–µ NS –∑–∞–ø–∏—Å–µ–π!)

   **–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"
   - –¢–∏–ø: –≤—ã–±–µ—Ä–∏—Ç–µ `A`
   - –ò–º—è: –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º (–∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ `@`)
   - –ó–Ω–∞—á–µ–Ω–∏–µ: –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à IP —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123.45.67.89`)
   - –ù–∞–∂–º–∏—Ç–µ: "–û–ö"

   **–î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –¥–ª—è www:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É: "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"
   - –¢–∏–ø: –≤—ã–±–µ—Ä–∏—Ç–µ `A`
   - –ò–º—è: `www`
   - –ó–Ω–∞—á–µ–Ω–∏–µ: –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à IP —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123.45.67.89`)
   - –ù–∞–∂–º–∏—Ç–µ: "–û–ö"

6. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –¥–ª—è `mybook-hunter.store`:**
   - –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ "–ú–æ–∏ –¥–æ–º–µ–Ω—ã"
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–æ–º–µ–Ω `mybook-hunter.store`
   - –ù–∞–∂–º–∏—Ç–µ: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–æ–π"
   - –£–¥–∞–ª–∏—Ç–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏ (–∫—Ä–æ–º–µ NS)
   - –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å–∏ (–∫–∞–∫ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞):
     - –¢–∏–ø: `A`, –ò–º—è: `@`, –ó–Ω–∞—á–µ–Ω–∏–µ: `123.45.67.89`
     - –¢–∏–ø: `A`, –ò–º—è: `www`, –ó–Ω–∞—á–µ–Ω–∏–µ: `123.45.67.89`

7. **–ù–∞–∂–º–∏—Ç–µ:** "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"

8. **–î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS:**
   - –û–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 5-30 –º–∏–Ω—É—Ç
   - –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–µ—Å—å: https://www.whatsmydns.net/

**‚úÖ DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 3. –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –°–ï–†–í–ï–†–£

### –ù–∞ Windows:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell:**
   - –ù–∞–∂–º–∏—Ç–µ: `Win + X`
   - –í—ã–±–µ—Ä–∏—Ç–µ: "Windows PowerShell"

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   ```bash
   ssh root@123.45.67.89
   ```
   *(–∑–∞–º–µ–Ω–∏—Ç–µ `123.45.67.89` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP)*

3. **–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:**
   - –ü–∞—Ä–æ–ª—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–≤–æ–¥–µ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!)
   - –í—Å—Ç–∞–≤—å—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ –ø–∏—Å—å–º–∞ –æ—Ç —Ö–æ—Å—Ç–∏–Ω–≥–∞
   - –ù–∞–∂–º–∏—Ç–µ: `Enter`

4. **–£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   - –í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: `root@server-name:~#`
   - –í—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–µ—Ä–≤–µ—Ä—É!

### –ù–∞ Mac/Linux:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª:**
   - `Cmd + Space` ‚Üí –≤–≤–µ–¥–∏—Ç–µ "Terminal"

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å:**
   ```bash
   ssh root@123.45.67.89
   ```

3. **–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ Enter**

**‚úÖ –í—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–µ—Ä–≤–µ—Ä—É!**

---

## 4. –£–°–¢–ê–ù–û–í–ö–ê –ù–ï–û–ë–•–û–î–ò–ú–û–ì–û –ü–û

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ (–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ):

### 1. –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:

```bash
apt update && apt upgrade -y
```

*(–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è ‚Äî 2-5 –º–∏–Ω—É—Ç)*

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker:

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
```

*(–ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã)*

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose:

```bash
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx –∏ Certbot:

```bash
apt install nginx certbot python3-certbot-nginx git -y
```

### 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª–µ–π):

```bash
apt install python3 python3-pip -y
```

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
docker --version
docker-compose --version
nginx -v
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º.

**‚úÖ –ü–û —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 5. –ó–ê–ì–†–£–ó–ö–ê –ü–†–û–ï–ö–¢–ê –ù–ê –°–ï–†–í–ï–†

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:**

   ```bash
   cd /var/www
   git clone https://github.com/TeQmer/BookHunter.git bookhunter
   cd bookhunter
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã:**

   ```bash
   ls -la
   ```

   –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ñ–∞–π–ª—ã: `main.py`, `docker-compose.prod.yml`, –∏ —Ç.–¥.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SFTP (–µ—Å–ª–∏ GitHub –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. **–°–∫–∞—á–∞–π—Ç–µ FileZilla:** https://filezilla-project.org/

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ FileZilla**

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   - –•–æ—Å—Ç: `123.45.67.89`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `root`
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
   - –ü–æ—Ä—Ç: `22`

4. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   - –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ `/var/www/bookhunter`

**‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 6. –ù–ê–°–¢–†–û–ô–ö–ê –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø (.ENV)

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env.prod:

```bash
nano .env.prod
```

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏:

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–ù–ï –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python3 -c "import secrets; print('DB Password:', secrets.token_urlsafe(32)); print('Redis Password:', secrets.token_urlsafe(32)); print('Secret Key:', secrets.token_urlsafe(32))"
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏!

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env.prod:

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä `nano` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ) –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
# ============================================================
# –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –î–õ–Ø –ü–†–û–î–ê–ö–®–ï–ù–ê
# ============================================================

# ========== –ë–ê–ó–ê –î–ê–ù–ù–´–• POSTGRESQL ==========
DATABASE_URL=postgresql+asyncpg://bookuser:–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_–ë–î@postgres:5432/book_discounts
POSTGRES_USER=bookuser
POSTGRES_PASSWORD=–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_–ë–î

# ========== REDIS ==========
REDIS_URL=redis://:–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_REDIS@redis:6379/0
REDIS_PASSWORD=–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_REDIS

# ========== GOOGLE SHEETS ==========
GOOGLE_SHEET_ID=–í–ê–®_ID_–¢–ê–ë–õ–ò–¶–´_GOOGLE

# Google Credentials (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –≤–∞—à–µ–≥–æ credentials.json)
GOOGLE_CREDENTIALS_TYPE=service_account
GOOGLE_CREDENTIALS_PROJECT_ID=–í–ê–®_PROJECT_ID
GOOGLE_CREDENTIALS_PRIVATE_KEY_ID=–í–ê–®_PRIVATE_KEY_ID
GOOGLE_CREDENTIALS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n–í–ê–®_–ü–†–ò–í–ê–¢–ù–´–ô_–ö–õ–Æ–ß\n-----END PRIVATE KEY-----\n"
GOOGLE_CREDENTIALS_CLIENT_EMAIL=–í–ê–®_EMAIL@project-id.iam.gserviceaccount.com
GOOGLE_CREDENTIALS_CLIENT_ID=–í–ê–®_CLIENT_ID
GOOGLE_CREDENTIALS_AUTH_URI=https://accounts.google.com/o/oauth2/auth
GOOGLE_CREDENTIALS_TOKEN_URI=https://oauth2.googleapis.com/token
GOOGLE_CREDENTIALS_AUTH_PROVIDER_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
GOOGLE_CREDENTIALS_CLIENT_CERT_URL=https://www.googleapis.com/robot/v1/metadata/x509/–í–ê–®_EMAIL%40project-id.iam.gserviceaccount.com

# ========== TELEGRAM BOT ==========
TELEGRAM_BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–û–¢_BOTFATHER

# ========== TELEGRAM MINI APP ==========
MINI_APP_URL=https://mybook-hunter.store/telegram

# ========== –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ ==========
SECRET_KEY=–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß
ALGORITHM=HS256

# ========== –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ ==========
ADMIN_USERNAME=admin
ADMIN_PASSWORD=–í–ê–®_–ü–ê–†–û–õ–¨_–î–õ–Ø_–ê–î–ú–ò–ù–ö–ò

# ========== CORS ==========
ALLOWED_ORIGINS=https://mybook-hunter.ru,https://www.mybook-hunter.ru,https://mybook-hunter.store,https://www.mybook-hunter.store,https://t.me,https://web.telegram.org

# ========== TRUSTED HOSTS ==========
ALLOWED_HOSTS=mybook-hunter.ru,www.mybook-hunter.ru,mybook-hunter.store,www.mybook-hunter.store

# ========== –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ==========
APP_NAME=BookHunter
DEBUG=False
LOG_LEVEL=INFO

# ========== CELERY ==========
CELERY_BROKER_URL=redis://:–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_REDIS@redis:6379/0
CELERY_RESULT_BACKEND=redis://:–í–ê–®_–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô_–ü–ê–†–û–õ–¨_REDIS@redis:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=['json']
CELERY_TIMEZONE=Europe/Moscow
```

### 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:

- –ù–∞–∂–º–∏—Ç–µ: `Ctrl + O`
- –ù–∞–∂–º–∏—Ç–µ: `Enter`
- –ù–∞–∂–º–∏—Ç–µ: `Ctrl + X` (–¥–ª—è –≤—ã—Ö–æ–¥–∞)

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª:

```bash
cat .env.prod
```

**‚úÖ .env.prod –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 7. –ù–ê–°–¢–†–û–ô–ö–ê NGINX

### 1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞:

```bash
nano /etc/nginx/sites-available/mybook-hunter.ru
```

### 2. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```nginx
# HTTP ‚Üí HTTPS Redirect
server {
    listen 80;
    server_name mybook-hunter.ru www.mybook-hunter.ru;
    return 301 https://$server_name$request_uri;
}

# HTTPS Configuration
server {
    listen 443 ssl http2;
    server_name mybook-hunter.ru www.mybook-hunter.ru;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã —á–µ—Ä–µ–∑ Certbot)
    ssl_certificate /etc/letsencrypt/live/mybook-hunter.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/mybook-hunter.ru/privkey.pem;

    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
    add_header Access-Control-Allow-Origin "$http_origin" always;
    add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS" always;
    add_header Access-Control-Allow-Headers "Authorization, Content-Type, X-Requested-With" always;
    add_header Access-Control-Allow-Credentials "true" always;

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ OPTIONS –∑–∞–ø—Ä–æ—Å–æ–≤
    if ($request_method = 'OPTIONS') {
        return 204;
    }

    # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_http_version 1.1;
        proxy_read_timeout 86400;
    }

    # Telegram Mini App
    location /telegram {
        alias /var/www/bookhunter/telegram/app;
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    location /ws {
        proxy_pass http://127.0.0.1:8000/ws;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400;
    }
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl + O`, `Enter`, `Ctrl + X`

### 3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Telegram –¥–æ–º–µ–Ω–∞:

```bash
nano /etc/nginx/sites-available/mybook-hunter.store
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```nginx
# HTTP ‚Üí HTTPS Redirect
server {
    listen 80;
    server_name mybook-hunter.store www.mybook-hunter.store;
    return 301 https://$server_name$request_uri;
}

# HTTPS Configuration (–¥–ª—è Telegram Mini App)
server {
    listen 443 ssl http2;
    server_name mybook-hunter.store www.mybook-hunter.store;

    ssl_certificate /etc/letsencrypt/live/mybook-hunter.store/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/mybook-hunter.store/privkey.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # CORS –¥–ª—è Telegram
    add_header Access-Control-Allow-Origin "https://t.me https://web.telegram.org" always;
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always;
    add_header Access-Control-Allow-Headers "Content-Type, X-Requested-With" always;

    if ($request_method = 'OPTIONS') {
        return 204;
    }

    # Telegram Mini App
    location / {
        alias /var/www/bookhunter/telegram/app;
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # –ü—Ä–æ–∫—Å–∏—Ä—É–µ–º API –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    location /api {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl + O`, `Enter`, `Ctrl + X`

### 4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
ln -s /etc/nginx/sites-available/mybook-hunter.ru /etc/nginx/sites-enabled/
ln -s /etc/nginx/sites-available/mybook-hunter.store /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx:

```bash
nginx -t
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `syntax is ok` –∏ `test is successful`

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx:

```bash
systemctl restart nginx
systemctl enable nginx
```

**‚úÖ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 8. –ü–û–õ–£–ß–ï–ù–ò–ï SSL –°–ï–†–¢–ò–§–ò–ö–ê–¢–ê

### 1. –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞:

```bash
certbot --nginx -d mybook-hunter.ru -d www.mybook-hunter.ru
```

**–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:**
1. Email: –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à email
2. –°–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏: –≤–≤–µ–¥–∏—Ç–µ `Y` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter
3. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP –Ω–∞ HTTPS: –≤–≤–µ–¥–∏—Ç–µ `2` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter

### 2. –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è Telegram –¥–æ–º–µ–Ω–∞:

```bash
certbot --nginx -d mybook-hunter.store -d www.mybook-hunter.store
```

–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:

```bash
certbot certificates
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –æ–±–∞ –¥–æ–º–µ–Ω–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏.

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
(crontab -l 2>/dev/null; echo "0 3 * * * certbot renew --quiet") | crontab -
```

**‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 9. –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker-compose -f docker-compose.prod.yml up -d
```

*(–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã, –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è)*

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker-compose -f docker-compose.prod.yml ps
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `Up`:
- `app`
- `celery_worker`
- `celery_beat`
- `telegram_bot`
- `postgres`
- `redis`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
docker-compose -f docker-compose.prod.yml logs app
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
INFO: Uvicorn running on http://0.0.0.0:8000
INFO: Application startup complete
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Telegram –±–æ—Ç–∞:

```bash
docker-compose -f docker-compose.prod.yml logs telegram_bot
```

**‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 10. –ù–ê–°–¢–†–û–ô–ö–ê TELEGRAM BOT

### 1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç):

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram**
2. **–ù–∞–π–¥–∏—Ç–µ @BotFather**
3. **–ù–∞–ø–∏—à–∏—Ç–µ:** `/newbot`
4. **–ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞:** `BookHunter` (–∏–ª–∏ –ª—é–±–æ–µ)
5. **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `mybookhunter_bot` (–∏–ª–∏ –ª—é–±–æ–µ, –¥–æ–ª–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_bot`)
6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```bash
curl -F "url=https://mybook-hunter.ru/api/telegram/webhook" \
     -F "max_connections=100" \
     https://api.telegram.org/bot–í–ê–®_–¢–û–ö–ï–ù/setWebhook
```

*(–∑–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_–¢–û–ö–ï–ù` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω)*

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Menu Button (–¥–ª—è Mini App):

1. **–û—Ç–∫—Ä–æ–π—Ç–µ @BotFather**
2. **–ù–∞–ø–∏—à–∏—Ç–µ:** `/mybots`
3. **–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞**
4. **Bot Settings** ‚Üí **Menu Button**
5. **–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏:** `üìö –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ`
6. **URL:** `https://mybook-hunter.store/telegram`
7. **–ù–∞–∂–º–∏—Ç–µ:** "Done"

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ—Ç–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram**
2. **–ù–∞–ø–∏—à–∏—Ç–µ:** `/start`
3. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é** (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å "üìö –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")

**‚úÖ Telegram Bot –Ω–∞—Å—Ç—Ä–æ–µ–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É.**

---

## 11. –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://mybook-hunter.ru
   - ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∞–π—Ç —Å HTTPS –∑–∞–º–∫–æ–º
   - ‚úÖ –î–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∞–¥–º–∏–Ω–∫–∞ –Ω–∞ `/admin`

2. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://mybook-hunter.ru/api/health
   - ‚úÖ –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. **–û—Ç–∫—Ä–æ–π—Ç–µ:** https://mybook-hunter.store/telegram
   - ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è Telegram Mini App

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞**
2. **–ù–∞–ø–∏—à–∏—Ç–µ:** `/start`
3. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é**
4. ‚úÖ Mini App –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
docker-compose -f docker-compose.prod.yml logs -f
```

*(–ù–∞–∂–º–∏—Ç–µ `Ctrl + C` –¥–ª—è –≤—ã—Ö–æ–¥–∞)*

**‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –∑–∞–ø—É—Å–∫–æ–º!** üéâ

---

## 12. –¢–†–ê–ë–õ–®–£–¢–ò–ù–ì

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.prod.yml ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose -f docker-compose.prod.yml logs app

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
systemctl restart nginx
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot certificates

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∑–∞–Ω–æ–≤–æ
certbot --nginx -d mybook-hunter.ru -d www.mybook-hunter.ru --force-renewal

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
systemctl restart nginx
```

### Telegram Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env.prod
cat .env.prod | grep TELEGRAM_BOT_TOKEN

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
docker-compose -f docker-compose.prod.yml logs telegram_bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
docker-compose -f docker-compose.prod.yml restart telegram_bot
```

### Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.prod`:

```bash
cat .env.prod | grep -E "MINI_APP_URL|ALLOWED_ORIGINS|ALLOWED_HOSTS"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```env
MINI_APP_URL=https://mybook-hunter.store/telegram
ALLOWED_ORIGINS=https://mybook-hunter.ru,https://mybook-hunter.store,https://t.me
ALLOWED_HOSTS=mybook-hunter.ru,mybook-hunter.store
```

### Google Sheets –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Google Credentials
docker-compose -f docker-compose.prod.yml logs app | grep -i google

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã
cat .env.prod | grep GOOGLE_SHEET_ID
```

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.prod.yml down

# –£–¥–∞–ª–∏—Ç–µ volume (—ç—Ç–æ —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î!)
docker volume rm bookhunter_postgres_data bookhunter_redis_data

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker-compose -f docker-compose.prod.yml up -d
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker-compose -f docker-compose.prod.yml logs
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker-compose -f docker-compose.prod.yml logs app
docker-compose -f docker-compose.prod.yml logs celery_worker
docker-compose -f docker-compose.prod.yml logs celery_beat
docker-compose -f docker-compose.prod.yml logs telegram_bot
```

---

## üìã –ß–ï–ö-–õ–ò–°–¢ –î–ï–ü–õ–û–Ø

- [ ] –ö—É–ø–ª–µ–Ω —Å–µ—Ä–≤–µ—Ä (Ubuntu 22.04)
- [ ] –î–æ–º–µ–Ω—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ IP —Å–µ—Ä–≤–µ—Ä–∞ (DNS)
- [ ] Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] `.env.prod` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTPS
- [ ] Telegram Bot –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Mini App —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞

---

## üìû –ù–£–ñ–ù–ê –ü–û–ú–û–©–¨?

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** `docker-compose -f docker-compose.prod.yml logs`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx:** `nginx -t`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±:**
   ```bash
   systemctl status nginx
   systemctl status docker
   ```
4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   reboot
   ```
5. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —Å–Ω–æ–≤–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```bash
   cd /var/www/bookhunter
   docker-compose -f docker-compose.prod.yml up -d
   ```

---

## üîß –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker:

```bash
# –ó–∞–ø—É—Å–∫
docker-compose -f docker-compose.prod.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.prod.yml down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.prod.yml restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.prod.yml logs -f

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git pull
docker-compose -f docker-compose.prod.yml up -d --build
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Nginx:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f /var/log/nginx/error.log
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSL:

```bash
# –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot renew

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
certbot certificates

# –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
certbot renew --dry-run
```

---

**üéâ –£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º BookHunter!**

–ï—Å–ª–∏ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤–∞—à –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞:
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç:** https://mybook-hunter.ru
- **Telegram Mini App:** https://mybook-hunter.store/telegram
